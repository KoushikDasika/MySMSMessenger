<div class="flex flex-col px-16">
  <h2 class="text-3xl font-bold mb-4">New Message</h2>
  <form [formGroup]="messageForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="phoneNumber">Phone Number (E.164 format)</label>
      <input 
        type="tel" 
        id="phoneNumber" 
        formControlName="phoneNumber" 
        class="form-control"
        placeholder="+1234567890"
        (input)="formatPhoneNumber($event)"
      >
      <div *ngIf="phoneNumber?.invalid && (phoneNumber?.dirty || phoneNumber?.touched)" class="error-message">
        <div *ngIf="phoneNumber?.errors?.['required']">Phone number is required.</div>
        <div *ngIf="phoneNumber?.errors?.['invalidPhoneNumber']">Please enter a valid phone number.</div>
        <div *ngIf="phoneNumber?.errors?.['notE164Format']">Phone number must be in E.164 format (e.g., +1234567890).</div>
      </div>
      <small class="form-text text-muted">Enter phone number in international format (e.g., +1234567890)</small>
    </div>
    
    <div class="form-group">
      <label for="body">Message</label>
      <textarea 
        id="body" 
        formControlName="body" 
        class="form-control"
        rows="4"
        placeholder="Type your message here..."
      ></textarea>
      <div *ngIf="body?.invalid && (body?.dirty || body?.touched)" class="error-message">
        <div *ngIf="body?.errors?.['required']">Message is required.</div>
        <div *ngIf="body?.errors?.['maxlength']">Message cannot exceed {{MAX_LENGTH}} characters.</div>
      </div>
      <small class="form-text text-muted">{{body?.value?.length || 0}}/{{MAX_LENGTH}}</small>
    </div>
    
    <div class="form-actions">
      <button type="button" (click)="clearForm()" class="btn btn-secondary">Clear</button>
      <button type="submit" [disabled]="messageForm.invalid || submitting" class="btn btn-primary">
        {{submitting ? 'Sending...' : 'Send Message'}}
      </button>
    </div>
  </form>
</div>
