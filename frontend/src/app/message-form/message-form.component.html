<div class="flex flex-col px-16">
  <h2 class="text-3xl font-bold mb-4">New Message</h2>
  <form [formGroup]="messageForm" (ngSubmit)="onSubmit()">
    <div class="mb-4">
      <label for="phoneNumber" class="block mb-2">Phone Number</label>
      <input 
        type="text" 
        id="phoneNumber" 
        formControlName="phoneNumber" 
        class="w-full p-2 border border-gray-300 rounded" 
        [ngClass]="{'border-red-500': phoneNumber?.errors && phoneNumber?.touched}">
      <p class="text-red-500 text-sm mt-1" *ngIf="phoneNumber?.errors?.['required'] && phoneNumber?.touched">
        Phone number is required
      </p>
    </div>
    <div class="">
      <label for="body" class="block mb-2">Message</label>
      <textarea 
        id="body" 
        formControlName="body" 
        class="w-full p-2 border border-gray-300 rounded" 
        rows="6"
        maxlength="{{ MAX_LENGTH }}"
        [ngClass]="{'border-red-500': body?.errors && body?.touched}">
      </textarea>
      <p class="text-red-500 text-sm mt-1" *ngIf="body?.errors?.['required'] && body?.touched">
        Message is required
      </p>
    </div>
    <div class="flex flex-row justify-end mb-8">
      <p class="text-gray-700 text-sm">{{ body?.value?.length || 0 }} / {{ MAX_LENGTH }}</p>
    </div>
    <div class="flex justify-between">
      <button 
        type="button" 
        class="bg-white text-black px-4 py-2 rounded-full border border-gray-300" 
        (click)="clearForm()" 
        [disabled]="submitting">
        Clear
      </button>
      <button 
        type="submit" 
        class="bg-black text-white px-4 py-2 rounded-full" 
        [disabled]="messageForm.invalid || submitting">
        <span *ngIf="!submitting">Submit</span>
        <span *ngIf="submitting" class="flex items-center">
          Sending...
        </span>
      </button>
    </div>
  </form>
</div>
